---
title: next.js useQueryParams
date: 2020-01-23
tags:
  - code
---

i wanted `useState` but for storing things in the query useQueryParams and everything on the internet was way too complicated as per usual.

here it is, in all it's straightforward glory

```ts
// via https://blog.mat.tc/next-js-use-query-params
function useQueryParams(): [Record<string, string>, (value: Record<string, string>) => void] {
  const router = useRouter();

  const [query, _setQuery] = useState(() => router.query as Record<string, string>);

  const setQuery = useCallback(
    (values: Record<string, string>) => {
      const url = `${window.location.pathname}?${new URLSearchParams(values)}`;
      router.replace(url, url, { shallow: true });
      _setQuery(values);
    },
    [router],
  );

  return [query, setQuery];
}

```
